---
Test
---
!1 Iteraction with maps using !-BrowserTest-! with Storyboard
Sample test on [[Google Maps][https://www.google.com/maps]].

!note '''Note:''' More about getting offsets in canvas maps: https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapCanvasProjection

!*> definitions
!define mapUrl {!-https://www.google.com/maps/@51.7147561,11.342505,5.16z-!}
!define minimap {!-css=.widget-minimap-shim.widget-minimap-shim-button-!}
!define map {css=[aria-label="Map"]}
!define locationBottomPopup {css=div.widget-reveal-card-container}
*!
!*> libraries
|library     |
|browser test|
*!
!*> scenarios
|scenario           |lets open canvas map|
|set browser size to|1024   |by   |800   |
|open               |${mapUrl}           |
|wait for visible   |${minimap}          |
|click              |Remind me later     |

|scenario    |lets test zooming by double clicking with offset|
|double click|${map}    |xoffset    |294   |yoffset   |-200   |
|double click|${map}    |xoffset    |294   |yoffset   |-200   |

|scenario        |lets test right click with offset     |
|right click     |${map} |xoffset|279   |yoffset   |73  |
|click           |What's here?                          |
|wait for visible|Vilnius|in     |${locationBottomPopup}|

|scenario        |lets test click with offset          |
|click           |${map}|xoffset|150   |yoffset   |43  |
|click           |${map}|xoffset|150   |yoffset   |43  |
|wait for visible|Kaunas|in     |${locationBottomPopup}|
*!

|script              |
|lets open canvas map|

|storyboard                                      |
|lets test zooming by double clicking with offset|

|script                           |
|lets test right click with offset|
|lets test click with offset      |
